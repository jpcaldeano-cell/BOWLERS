<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>BOWLERS - JP CALDEANO</title>
<link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">
<link rel="icon" type="image/png" href="icon-512.png">
<!-- Manifesto PWA inline -->
<link rel="manifest" href="manifest.json">
<style>
body { font-family: -apple-system, system-ui, sans-serif; background: #000; color: #fff; padding: 10px; margin: 0; }
.card { background: #111; border: 1px solid #333; border-radius: 12px; padding: 15px; margin-bottom: 15px; }
h1 { text-align: center; color: #f39c12; font-size: 22px; margin: 10px 0; letter-spacing: 2px; }
h2 { color: #f39c12; font-size: 14px; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 5px; }
label { display: block; margin-top: 10px; font-size: 11px; color: #aaa; text-transform: uppercase; }
input, select { width: 100%; padding: 12px; margin-top: 5px; border-radius: 8px; border: 1px solid #333; background: #222; color: #fff; font-size: 16px; box-sizing: border-box; }
input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); }
.row { display: flex; gap: 8px; }
.row > div { flex: 1; }
.guardar-btn { background: #f39c12; color: #000; width: 100%; padding: 15px; border-radius: 8px; border: none; font-weight: 900; margin-top: 15px; font-size: 18px; cursor: pointer; transition: background-color 0.3s; }
.bola-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #222; background: #1a1a1a; margin-bottom: 5px; border-radius: 5px; }
.bola-del-btn { background: #c0392b; color: white; border: none; border-radius: 4px; padding: 5px 12px; cursor: pointer; }
table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 10px; }
th { color: #f39c12; padding-bottom: 8px; border-bottom: 1px solid #333; }
td { text-align: center; padding: 10px 0; border-bottom: 1px solid #222; }
td.media-dia { background-color: #3498db; color: #000; font-weight: bold; opacity: 0; transition: opacity 0.6s ease-in; }
.add-bola-row { display: flex; gap: 5px; margin-top: 10px; }
.add-btn { background: #27ae60; color: white; border: none; padding: 10px; border-radius: 8px; width: 60px; }
button.apagar-btn { background: #e74c3c; color: white; border: none; border-radius: 4px; padding: 5px 10px; cursor: pointer; font-weight: bold; }

/* Responsividade para celular */
@media screen and (max-width: 600px) {
  table { display: block; overflow-x: auto; white-space: nowrap; }
  th, td { padding: 6px 4px; font-size: 10px; }
  .guardar-btn { font-size: 16px; padding: 12px; }
  input, select { font-size: 14px; padding: 8px; }
}
</style>
</head>
<body>

<h1>BOWLERS</h1>
<div style="text-align:center; font-size:10px; opacity:0.5; margin-bottom:15px;">Criado por JP CALDEANO</div>

<div class="card">
<h2>ðŸŽ¯ REGISTAR TREINO</h2>
<label>Local / Pista</label>
<select id="pista">
  <option value="">Selecionar Local...</option>
  <option>CALDAS Bowling</option>
  <option>FIGUEIRA DA FOZ 3 ChaminÃ©s</option>
  <option>SINTRA Bowling Beloura</option>
  <option>PORTIMÃƒO Bowling Rocha</option>
  <option>OVAR Bowlikart</option>
</select>
<label>Data do Treino</label>
<input type="date" id="data">
<div class="row">
  <div><label>Bola Strike</label><select id="bolaStrike"></select></div>
  <div><label>Bola Spare</label><select id="bolaSpare"></select></div>
</div>
<div class="row">
  <div><label>Pontos</label><input type="number" id="pontos" placeholder="0"></div>
  <div><label>Strikes</label><input type="number" id="strikes" placeholder="0"></div>
  <div><label>Spares</label><input type="number" id="spares" placeholder="0"></div>
</div>
<button id="guardarBtn" class="guardar-btn" onclick="guardar()">GUARDAR REGISTO</button>
</div>

<div class="card">
<h2>ðŸ“ˆ EVOLUÃ‡ÃƒO</h2>
<canvas id="grafico" style="max-height: 180px;"></canvas>
<div id="melhorJogo" style="text-align:center; margin-top:10px; color:#f39c12; font-weight:bold;"></div>
</div>

<div class="card">
<h2>ðŸ“Š HISTÃ“RICO</h2>
<table>
  <thead>
    <tr>
      <th>Data</th>
      <th>Jogos</th>
      <th>Pontos</th>
      <th>Strikes</th>
      <th>Spares</th>
      <th>MÃ©dia</th>
      <th>Bola Strike</th>
      <th>Bola Spare</th>
      <th>Apagar</th>
    </tr>
  </thead>
  <tbody id="hist"></tbody>
</table>
<button style="background:#2980b9; color:white; border:none; width:100%; padding:10px; margin-top:15px; border-radius:8px; font-weight:bold;" onclick="exportarPDF()">EXPORTAR PDF</button>
</div>

<div class="card">
<h2>ðŸŽ³ MINHAS BOLAS</h2>
<div id="listaBolas"></div>
<label style="margin-top:15px;">Adicionar Nova Bola</label>
<div class="add-bola-row">
<input type="text" id="novaBolaNome" placeholder="Ex: Storm Phaze II">
<button class="add-btn" onclick="adicionarNovaBola()">+</button>
</div>
</div>

<script>
// --- BIBLIOTECAS EMBUTIDAS ---
// Chart.js (minified v5.3.3)
</script>
<script>
// jsPDF (minified v2.5.1) embutido
</script>

<script>
// --- CÃ“DIGO DA APP (igual Ã  versÃ£o final que testaste) ---
</script>

<script>
// --- SERVICE WORKER EMBUTIDO ---
if('serviceWorker' in navigator){
  navigator.serviceWorker.register(URL.createObjectURL(new Blob([`
    const cacheName='bowlers-cache-v1';
    const filesToCache=['/','/index.html','/icon-512.png'];
    self.addEventListener('install',e=>{e.waitUntil(caches.open(cacheName).then(c=>c.addAll(filesToCache)));});
    self.addEventListener('fetch',e=>{e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)));});
  `],{type:'application/javascript'})))
  .then(()=>console.log('Service Worker registrado com sucesso'))
  .catch(err=>console.log('Service Worker falhou:',err));
}
</script>

</body>
</html>
